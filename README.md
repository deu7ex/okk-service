Laravel-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á –Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ, –∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É (Laravel Sanctum)
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ
- –ò–º–∏—Ç–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (RabbitMQ)
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ (Laravel Scheduler)
- –§–µ–π–∫–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- REST API —Å JSON-–æ—Ç–≤–µ—Ç–∞–º–∏

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

- [–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker][docker-install]
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone git@github.com:deu7ex/okk-service.git
```
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–∞–ø–∫–µ docker:
```bash
cp .env.example .env
```
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```
php artisan key:generate
```
- –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:
```bash
./docker-run.sh
```
- (–æ–ø–∏—Ü–æ–Ω–∞–ª—å–Ω–æ) –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker:
```bash
./docker-run.sh down
```
- –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:
```
docker exec okk-app php artisan migrate --seed
```
- –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```
docker exec -it okk-app /bin/sh -c "php artisan tinker --execute='dump(DB::table(\"users\")->first());'"
```

---

## üì° API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
POST /api/login
{
  "email": "test@example.com",
  "password": "password"
}
```
####–û—Ç–≤–µ—Ç:
```
{
  "token": "Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>",
  "user": {
    "id": 2,
    "name": "Ariel Treutel",
    "email": "test@example.com",
    ...
  }
}
```

### üì• –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É

```
POST /api/tasks
Accept: application/json
Authorization: Bearer <token>
{
  "audio_url": "https://example.com/audio.mp3",
  "parameters": { "lang": "ru" },
  "metadata": { "user_id": 123 }
}
```
####–û—Ç–≤–µ—Ç
```
{
  "message": "Task created",
  "data": {
    "audio_url": "https://example.com/audio.mp3",
    "status": 1,
    "status_label": "new"
    ...
  }
}
```

##ü™Ñ –§–µ–π–∫–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
- –°–µ—Ä–≤–∏—Å –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)
- –û—á–µ—Ä–µ–¥–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ RabbitMQ 
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ 
- –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ª–æ–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É logs

##üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker
- app ‚Äî Laravel-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 
- consumer ‚Äî –∫–æ–Ω—Å—É–º–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π 
- scheduler ‚Äî Laravel Scheduler 
- rabbitmq ‚Äî –±—Ä–æ–∫–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π

## ‚úÖ –ü—Ä–∏–º–µ—Ä—ã
 - `GET /api/tasks` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á 
 - `GET /api/tasks/{id}` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –∑–∞–¥–∞—á–µ 
 - `GET /api/segments` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞–º
 - `GET /api/segments/{id}` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –∞—É–¥–∏–æ —Ñ–∞–π–ª—É
 - `GET /api/evaluations` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ü–µ–Ω–æ–∫
 - `GET /api/evaluations/{id}` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –æ—Ü–µ–Ω–∫–µ
 - `GET /api/logs` ‚Äî –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
 - `GET /api/logs/{id}` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –æ—à–∏–±–æ–∫–µ

## üë®‚Äçüíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- PHP 8.2 
- Laravel 10+ 
- RabbitMQ 
- Docker 
- Sanctum 
- Faker

[docker-install]: https://docs.docker.com/install/#supported-platforms
